import{c as L,b as le,G as fe,j as F,h as M,g as se,a as ue,z,I as oe,r as te,l as ce,m as W,i as V,k as H,C as de,J as ve,K as Z,L as pe,M as T,N as q,O as _e,P as $,y as ge,Q as U,R as he,S as Ee,T as me,U as Te,V as ae,W as ie,X as Y,Y as Ae,e as Ce,Z as Ie,_ as Se,a0 as Ne,D as be,a1 as we,B as j,A as xe,a2 as ee,a3 as ke,a4 as Me,a5 as Re}from"./BBPmyNM4.js";function Le(e,r){return r}function De(e,r,f){for(var t=[],v=r.length,s,u=r.length,d=0;d<v;d++){let h=r[d];ie(h,()=>{if(s){if(s.pending.delete(h),s.done.add(h),s.pending.size===0){var c=e.outrogroups;B(U(s.done)),c.delete(s),c.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var a=t.length===0&&f!==null;if(a){var o=f,i=o.parentNode;Se(i),i.append(o),e.items.clear()}B(r,!a)}else s={pending:new Set(r),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function B(e,r=!0){for(var f=0;f<e.length;f++)Ne(e[f],r)}var ne;function Fe(e,r,f,t,v,s=null){var u=e,d=new Map,a=(r&fe)!==0;if(a){var o=e;u=M?F(se(o)):o.appendChild(L())}M&&ue();var i=null,h=oe(()=>{var l=f();return he(l)?l:l==null?[]:U(l)}),c,p=!0;function C(){n.fallback=i,Oe(n,c,u,r,t),i!==null&&(c.length===0?(i.f&T)===0?ae(i):(i.f^=T,R(i,null,u)):ie(i,()=>{i=null}))}var N=le(()=>{c=z(h);var l=c.length;let b=!1;if(M){var w=te(u)===ce;w!==(l===0)&&(u=W(),F(u),V(!1),b=!0)}for(var E=new Set,I=pe,x=_e(),_=0;_<l;_+=1){M&&H.nodeType===de&&H.data===ve&&(u=H,b=!0,V(!1));var S=c[_],k=t(S,_),g=p?null:d.get(k);g?(g.v&&Z(g.v,S),g.i&&Z(g.i,_),x&&I.skipped_effects.delete(g.e)):(g=He(d,p?u:ne??(ne=L()),S,k,_,v,r,f),p||(g.e.f|=T),d.set(k,g)),E.add(k)}if(l===0&&s&&!i&&(p?i=q(()=>s(u)):(i=q(()=>s(ne??(ne=L()))),i.f|=T)),M&&l>0&&F(W()),!p)if(x){for(const[D,O]of d)E.has(D)||I.skipped_effects.add(O.e);I.oncommit(C),I.ondiscard(()=>{})}else C();b&&V(!0),z(h)}),n={effect:N,items:d,outrogroups:null,fallback:i};p=!1,M&&(u=H)}function Oe(e,r,f,t,v){var g,D,O,X,y,G,J,K,P;var s=(t&Ie)!==0,u=r.length,d=e.items,a=e.effect.first,o,i=null,h,c=[],p=[],C,N,n,l;if(s)for(l=0;l<u;l+=1)C=r[l],N=v(C,l),n=d.get(N).e,(n.f&T)===0&&((D=(g=n.nodes)==null?void 0:g.a)==null||D.measure(),(h??(h=new Set)).add(n));for(l=0;l<u;l+=1){if(C=r[l],N=v(C,l),n=d.get(N).e,e.outrogroups!==null)for(const m of e.outrogroups)m.pending.delete(n),m.done.delete(n);if((n.f&T)!==0)if(n.f^=T,n===a)R(n,null,f);else{var b=i?i.next:a;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),A(e,i,n),A(e,n,b),R(n,b,f),i=n,c=[],p=[],a=i.next;continue}if((n.f&Y)!==0&&(ae(n),s&&((X=(O=n.nodes)==null?void 0:O.a)==null||X.unfix(),(h??(h=new Set)).delete(n))),n!==a){if(o!==void 0&&o.has(n)){if(c.length<p.length){var w=p[0],E;i=w.prev;var I=c[0],x=c[c.length-1];for(E=0;E<c.length;E+=1)R(c[E],w,f);for(E=0;E<p.length;E+=1)o.delete(p[E]);A(e,I.prev,x.next),A(e,i,I),A(e,x,w),a=w,i=x,l-=1,c=[],p=[]}else o.delete(n),R(n,a,f),A(e,n.prev,n.next),A(e,n,i===null?e.effect.first:i.next),A(e,i,n),i=n;continue}for(c=[],p=[];a!==null&&a!==n;)(o??(o=new Set)).add(a),p.push(a),a=a.next;if(a===null)continue}(n.f&T)===0&&c.push(n),i=n,a=n.next}if(e.outrogroups!==null){for(const m of e.outrogroups)m.pending.size===0&&(B(U(m.done)),(y=e.outrogroups)==null||y.delete(m));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||o!==void 0){var _=[];if(o!==void 0)for(n of o)(n.f&Y)===0&&_.push(n);for(;a!==null;)(a.f&Y)===0&&a!==e.fallback&&_.push(a),a=a.next;var S=_.length;if(S>0){var k=(t&fe)!==0&&u===0?f:null;if(s){for(l=0;l<S;l+=1)(J=(G=_[l].nodes)==null?void 0:G.a)==null||J.measure();for(l=0;l<S;l+=1)(P=(K=_[l].nodes)==null?void 0:K.a)==null||P.fix()}De(e,_,k)}}s&&Ae(()=>{var m,Q;if(h!==void 0)for(n of h)(Q=(m=n.nodes)==null?void 0:m.a)==null||Q.apply()})}function He(e,r,f,t,v,s,u,d){var a=(u&Ee)!==0?(u&me)===0?ge(f,!1,!1):$(f):null,o=(u&Te)!==0?$(v):null;return{v:a,i:o,e:q(()=>(s(r,a??f,o??v,d),()=>{e.delete(t)}))}}function R(e,r,f){if(e.nodes)for(var t=e.nodes.start,v=e.nodes.end,s=r&&(r.f&T)===0?r.nodes.start:f;t!==null;){var u=Ce(t);if(s.before(t),t===v)return;t=u}}function A(e,r,f){r===null?e.effect.first=f:r.next=f,f===null?e.effect.last=r:f.prev=r}function Ve(e=!1){const r=be,f=r.l.u;if(!f)return;let t=()=>Me(r.s);if(e){let v=0,s={};const u=Re(()=>{let d=!1;const a=r.s;for(const o in a)a[o]!==s[o]&&(s[o]=a[o],d=!0);return d&&v++,v});t=()=>z(u)}f.b.length&&we(()=>{re(r,t),ee(f.b)}),j(()=>{const v=xe(()=>f.m.map(ke));return()=>{for(const s of v)typeof s=="function"&&s()}}),f.a.length&&j(()=>{re(r,t),ee(f.a)})}function re(e,r){if(e.l.s)for(const f of e.l.s)z(f);r()}export{Le as a,Fe as e,Ve as i};
